#!/bin/bash
# Hook post-commit pour CryptoSpreadEdge

echo "ğŸ‰ Commit effectuÃ© avec succÃ¨s!"

# Afficher les informations du commit
commit_hash=$(git rev-parse HEAD)
commit_message=$(git log -1 --pretty=%B)
branch=$(git branch --show-current)

echo "ğŸ“ Commit: $commit_hash"
echo "ğŸ’¬ Message: $commit_message"
echo "ğŸŒ¿ Branche: $branch"

# VÃ©rifier si c'est une branche de fonctionnalitÃ©
if [[ $branch == feature/* ]]; then
    echo "âœ¨ Branche de fonctionnalitÃ© dÃ©tectÃ©e"
    echo "ğŸ’¡ N'oubliez pas de crÃ©er une Pull Request quand la fonctionnalitÃ© est prÃªte"
fi

# VÃ©rifier si c'est une branche de hotfix
if [[ $branch == hotfix/* ]]; then
    echo "ğŸš¨ Branche de hotfix dÃ©tectÃ©e"
    echo "ğŸ’¡ N'oubliez pas de fusionner vers master et de crÃ©er un tag de version"
fi

# VÃ©rifier si c'est une branche de release
if [[ $branch == release/* ]]; then
    echo "ğŸš€ Branche de release dÃ©tectÃ©e"
    echo "ğŸ’¡ N'oubliez pas de crÃ©er un tag de version et de fusionner vers master"
fi

# SuggÃ©rer des actions selon le type de commit
if [[ $commit_message == *"feat"* ]] || [[ $commit_message == *"feature"* ]]; then
    echo "âœ¨ FonctionnalitÃ© ajoutÃ©e - VÃ©rifiez que les tests passent"
fi

if [[ $commit_message == *"fix"* ]] || [[ $commit_message == *"bug"* ]]; then
    echo "ğŸ› Correction apportÃ©e - VÃ©rifiez que le problÃ¨me est rÃ©solu"
fi

if [[ $commit_message == *"docs"* ]]; then
    echo "ğŸ“š Documentation mise Ã  jour - VÃ©rifiez la cohÃ©rence"
fi

if [[ $commit_message == *"test"* ]]; then
    echo "ğŸ§ª Tests ajoutÃ©s - VÃ©rifiez la couverture de code"
fi

# Afficher le statut Git
echo "ğŸ“Š Statut actuel:"
git status --short

# SuggÃ©rer la prochaine Ã©tape
echo ""
echo "ğŸ’¡ Prochaines Ã©tapes suggÃ©rÃ©es:"
echo "  - python start.py test          # Lancer les tests"
echo "  - python scripts/git/git-manager.py status  # Voir le statut Git"
echo "  - git push origin $branch       # Pousser vers le remote"